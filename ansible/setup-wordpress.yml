- name: Setup WordPress with Docker
  hosts: all
  remote_user: ec2-user
  become: yes
  gather_facts: no
  tasks:

    - name: Pull WordPress Docker image
      docker_image:
        name: wordpress:latest
        source: pull
        state: present
      become: yes

    - name: Start WordPress container
      docker_container:
        name: wordpress_container
        image: wordpress:latest
        ports:
          - "80:80"
        env:
          WORDPRESS_DB_HOST: "{{ MYSQL_HOSTNAME }}"
          WORDPRESS_DB_USER: wordpressdb
          WORDPRESS_DB_PASSWORD: Unicorn4.21
          WORDPRESS_DB_NAME: ExampleRDSServerInstance
      become: yes
